<!DOCTYPE html>
<html>
<head>
  <title>b5 - A bouncing ball</title>
  <meta charset="UTF-8"> 
</head>
<body>
<!-- ******************************************* -->

<!-- This one has a black border -->
<canvas id="canvas1" width=1000 height=600 style="border:1px solid #000000;"> 
</canvas>

<script>
var canvas = document.getElementById("canvas1");
var context = canvas.getContext("2d");

var disc =
   { 
   x: 150,   //center
   y: 250,
   lastX: 150,  //last center
   lastY: 250,
   velocityX: -3.2,
   velocityY: 3.5,
   radius: 25,
   color: "rgba(255,0,255,1)"
   }


/*
** Draw the disc
*/

function draw() 
{
"use strict";
context.save();
context.beginPath();
context.arc(disc.x, disc.y, disc.radius, 0, Math.PI*2, false);
context.fillStyle = disc.color;
context.fill();
context.restore();
}


/*
** If the disc hits the edge of the canvas, reverse it's velociy
**  so it will stay on the canvas.
*/

function update()
{
"use strict";
/* If the disc goes too far right, reverse it's velocity. */
if ( (disc.x + disc.velocityX +disc.radius) > context.canvas.width )
   {
   disc.velocityX = -disc.velocityX;
   }

/* If the disc goes too far left, reverse it's velocity. */
if ( (disc.x + disc.velocityX -disc.radius) < 0 )
   {
   disc.velocityX = -disc.velocityX;
   }
 
/* If the disc goes too far down, reverse it's velocity. */
if ( (disc.y + disc.velocityY +disc.radius) > context.canvas.height )
   {
   disc.velocityY = -disc.velocityY;
   }

/* If the disc goes too far up, reverse it's velocity. */
if ( (disc.y + disc.velocityY -disc.radius) < 0 )
   {
   disc.velocityY = -disc.velocityY;
   }

/* Move the disc a fixed amount */
disc.x += disc.velocityX;
disc.y += disc.velocityY;

}  /* End of the update function */



function animate() 
{
"use strict";
context.clearRect(0,0,canvas.width,canvas.height);
update();
draw();
//window.requestAnimationFrame(animate);
//  Comment above if using setInterval
}


window.onload = function (){
window.setInterval(animate,1000/60);
}

//window.onload = function (){
//window.requestAnimationFrame(animate);
//}

//Mention David Geary's book "Core HTML5 Canvas."

</script>

<!-- ******************************************* -->
</body>
</html>


